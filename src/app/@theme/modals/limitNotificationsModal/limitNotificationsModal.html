
<nb-card #limitModal id="limitModal" class="limitNotificationsModal" data-keyboard="false" data-backdrop="static">
<!--    <simple-notifications [options]="options" (onCreate)="onCreate($event)" (onDestroy)="onDestroy($event)"></simple-notifications>-->
    <div id="tloader" [hidden]="!loading">
        <div></div>
    </div>
    <nb-card-header [show-close]="true" *ngIf="_notifications != null" >
        <h4 class="modal-title">
            <span>
                 Notification Limitations
            </span>
            <span style="width:3em;float: right;"> </span>
        </h4>

        <div>
            <h5 class="modal-title">
                {{getString('limit_notifications_subheader')}}
            </h5>
        </div>
    </nb-card-header>

    <nb-card-body  *ngIf="_notifications != null">
        <div class="addLimitationDiv">
            <i class="addLimitationBTN fa fa-plus" (click)="addLimitation()"></i>
        </div>
        <ul class="limitationList">
            <ng-template ngFor let-limit [ngForOf]="_notifications.notificationsLimitations" let-j="index" >
                <li>
                    <div class="myFlexcontainer notifs-limit">
                        <airlock-tooltip [content]="getString('edit_notification_limit')" [title]="getString('edit_notification_limit_title')"></airlock-tooltip>
                        <div class="padding-right padding-leftB control-label">{{getString('edit_notification_limit_occurrenceA')}}</div>
                        <div>
                            <airlock-tooltip [content]="getString('edit_notification_max')" [title]="getString('edit_notification_max_title')"></airlock-tooltip>
                        </div>
                        <div class="padding-right remove-padding-left maxNotificationsDiv">
                            <input type="number" tabindex="4" id="input91" placeholder="" [(ngModel)]="limit.maxNotifications" [value]="limit.maxNotifications || ''"  class="form-control with-success-addon endFlexContainer" type="number" min="0" >
                        </div>
                        <div class="padding-right control-label">{{getString('edit_notification_limit_occurrenceB')}}</div>
                        <div>
                            <airlock-tooltip [content]="getString('edit_notification_min_interval')" [title]="getString('edit_notification_min_interval_title')"></airlock-tooltip>
                        </div>
                        <div class="intervalPicker">
                            <div class="btn-group" dropdown style="vertical-align:baseline">
                                <button id="limitationButton"  [nbPopover]="templateRef" nbPopoverPlacement="bottom" type="button" class="btn btn-default intervalPickerBtn" dropdownToggle>
                                    {{getIntervalText(j)}}
                                </button>
                                <ng-template #templateRef>
                                    <ul class="menu-items">
                                        <ng-template ngFor let-item [ngForOf]="intervalValues" let-i="index" >
                                            <li role="menuitem" class="dropdown-item" (click)="selectIntervalValue(limit,i,j,item);" style="cursor: pointer">{{item}}</li>
                                        </ng-template>
                                    </ul>
                                </ng-template>
<!--                                <ul class="dropdown-menu" dropdownMenu>-->
<!--                                    <ng-template ngFor let-item [ngForOf]="intervalValues" let-i="index" >-->
<!--                                        <li *ngIf="!usedIntervals[i] || item == usedIntervalsText[j]" class="dropdown-item" (click)="selectIntervalValue(limit,i,j,item)" style="cursor: pointer">{{item}}</li>-->
<!--                                    </ng-template>-->
<!--                                </ul>-->
                            </div>
                        </div>
                        <div class="padding-right padding-left control-label">{{getString('edit_notification_limit_occurrenceC')}}</div>
                        <div class="removeLimitationDiv">
                            <a (click)="removeLimitation(j)" class="removeLimitationLink signout destructive"><i class="removeLimitationButton fa fa-trash"></i></a>
                        </div>
                    </div>
                </li>
            </ng-template>
        </ul>
    </nb-card-body>

    <nb-card-footer>
        <button type="button" class="btn btn-primary" (click)="save()">Save</button>
        <button type="button" class="btn btn-default" data-dismiss="modal" (click)="close()">Cancel</button>
    </nb-card-footer>
</nb-card>
