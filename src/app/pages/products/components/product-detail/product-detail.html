<!--<cohorts-settings-modal #cohortsSettingsModal (onSettingsSaved)="refreshTable()"></cohorts-settings-modal>-->
<div  class="productDetails" >
    <div id="tloader" [hidden]="!loading">
        <div></div>
    </div>
<!--    <season-modal #seasonModal [product]="_product" [season]="_season"-->
<!--                  (onSeasonAdded)="seasonAdded($event)"-->
<!--                  (onSeasonEdited)="seasonEdited($event)"-->
<!--                  (onSeasonDeleted)="seasonDeleted($event)"></season-modal>-->
<!--    <branch-usage-modal #usageModal></branch-usage-modal>-->
<!--    <document-links-Modal #documentLinksModal></document-links-Modal>-->
<!--    <edit-input-schema-modal #editInputSchemaModal></edit-input-schema-modal>-->
<!--    <edit-branch-modal (onBranchEdited) = "branchEdited($event)" #editBranchModal></edit-branch-modal>-->
    <ba-card *ngIf="_product" title="" baCardClass="with-scroll">
        <div class="row" style="margin-bottom: 15px">
            <div class="col-md-3" style="vertical-align: middle">
                <h3>{{_product.name}}</h3>
            </div>
            <div class="col-md-9">
                <button type="button" class="btn btn-primary btn-icon" style="float: right"
                        (click)="showCohortsSettings()" *ngIf="isShowCohortsSettings()">
                    <i class="ion-ios-settings" style="margin-right: 10px;"></i>
                    Cohorts Settings
                </button>
            </div>
        </div>
        <div style="margin-bottom: 20px">
            <form>
                <div class="row">
                    <div class="form-group col-md-12">
                        <label for="name">Name</label>
                        <input type="text" class="form-control" id="name" placeholder="" required
                               [(ngModel)]="_productCopy.name" name="name" #name="ngModel" [disabled] = "_isDisaplyOnly" (keydown.enter)="$event.preventDefault()">
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-12">
                        <label for="description">Description</label>
                        <textarea class="form-control" id="description" style="height: 60px" placeholder=""
                                  [(ngModel)]="_productCopy.description" name="description"  [disabled] = "_isDisaplyOnly" ></textarea>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">

                        <button type="submit" class="btn btn-default btn-with-icon" style="float: right"
                                (click)="onSave()" [disabled]="!didProductChange()">
                            <i class="ion-ios-checkmark-outline"></i>
                            Save
                        </button>
                        <button type="button" class="btn btn-default btn-with-icon" style="float: right; margin-right: 12px"
                                (click)="onReset()" [disabled]="!didProductChange()">
                            <i class="ion-ios-undo"></i>
                            Reset
                        </button>
                        <button type="submit" class="btn btn-default btn-with-icon" style="float: right; margin-right: 12px"
                                (click)="loading || starClicked($event,_product)" [tooltip]="getProductFollowTooltip(_product.isCurrentUserFollower)">
                            <i class="star-icon" container="body"  [ngClass]="{'ion-ios-star-outline':!_product.isCurrentUserFollower,'cell-button':!_product.isCurrentUserFollower, 'ion-ios-star':_product.isCurrentUserFollower, 'star-selected':_product.isCurrentUserFollower}"></i>
                            {{(_product.isCurrentUserFollower?"Unfollow":"Follow")}}
                        </button>
                    </div>
                </div>
            </form>
        </div>

        <ba-card *ngIf="_product" baCardClass="with-scroll" title="">

            <div class="row" style="margin-bottom: 15px">
                <div class="col-md-3" style="vertical-align: middle">
                    <h3>Version Ranges</h3>
                </div>
                <div class="col-md-9">
                    <button type="button" class="btn btn-primary btn-icon" style="float: right"
                            (click)="onAddSeason()" *ngIf="isShowAddSeason()">
                        <i class="ion-plus" style="margin-right: 10px;"></i>
                        Add Version Range
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="col-md-5">
                    <div class="horizontal-scroll">
                        <ba-card>
                            <table class="table table-hover" style="margin-bottom: 100px;">

                                <tbody>
                                <tr  style="background-color: rgba(0, 0, 0, 0.2);" >
                                    <td  align="left" style="vertical-align: baseline;">Minimum</td>
                                    <td  align="left">Maximum (up to, but not including)</td>
                                    <td  style="width: 40px;max-width: 40px"></td>
                                </tr>
                                <tr *ngFor="let s of _product.seasons" class="no-top-border" [class.selectedVersion] = "_season != null && s.uniqueId == _season.uniqueId" style="cursor: pointer;">
                                    <td style="padding-top: 6px;padding-bottom: 6px;" align="left" (click)="selectSeason(s)">{{s.minVersion}}</td>
                                    <td style="padding-top: 6px;padding-bottom: 6px;" align="left" (click)="selectSeason(s)">{{s.maxVersion}}</td>
<!--                                    <td style="width: 40px;max-width: 40px;padding-top: 6px;padding-bottom: 6px;">-->
<!--                                        <div class="dropdown al-user-profile actions-button" dropdown [isOpen]="status.openId === s.uniqueId" *ngIf="s != null && !_isHideDowloadLinks" style="">-->
<!--&lt;!&ndash;                                            <div class="dropdown-menu top-dropdown-menu profile-dropdown" aria-labelledby="user-profile-dd" dropdownMenu>&ndash;&gt;-->
<!--&lt;!&ndash;                                            </div>&ndash;&gt;-->
<!--                                        </div>-->
<!--                                    </td>-->
                                    <td style="width:7%; min-width: 60px; vertical-align: middle; text-align: end;" class="-align-right">
                                        <button [nbPopover]="templateRef" dropdownToggle nbPopoverPlacement="bottom" class="profile-toggle-link btn btn-icon btn-circle" id="user-profile-dd1" data-toggle="dropdown" aria-expanded="false" title="Actions">
                                            <i class="ion-settings"></i>
                                        </button>
                                        <ng-template #templateRef>
                                            <ul class="menu-items">
                                                <li class="dropdown-item" *ngIf="!_isHideDowloadLinks"><a (click)="onShowDocumentLinks(s)"><i class="fa ion-ios-download-outline"></i>Download defaults File</a></li>
                                                <li class="dropdown-item" *ngIf="isShowEditSeason()"><a (click)="onEditSeason(s)"><i class="fa ion-edit"></i>Edit version range</a></li>
                                                <li class="dropdown-item" *ngIf="!_isDisaplyOnly "><a (click)="onEditInputSchema(s)"><i class="fa ion-compose"></i>Edit input schema</a></li>
                                                <li class="dropdown-item" ><a (click)="onDownloadBranchUsage(s)"><i class="fa fa-code-fork"></i>Show branch usage</a></li>
                                            </ul>
                                        </ng-template>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </ba-card>
                    </div>

                </div>
                <div class="col-md-7">

                    <div *ngIf="canUseBranches" class="form-group col-md-12">
                        <ba-card>
                            <h3>Branches</h3>
                            <div class="horizontal-scroll" *ngIf="_season != null && branches != null">
                                <table class="table table-hover">
                                    <tbody>
                                    <tr *ngFor="let b of branches" style="border-top: 1px solid rgba(255, 255, 255, 0.3);">
                                        <!--<td>{{s.name}}</td>-->
                                        <td align="left"><a (click)="canShowEditBranch(b) && onEditBranch(b)" [class.showPointerOnHover] = "canShowEditBranch(b)" >{{b.name}}</a></td>
                                        <td align="left" style="float: right;border-top:0px;">
                                            <i *ngIf="canShowEditBranch(b)" class="fa ion-edit cell-button" (click)="onEditBranch(b)" style="margin-right: 6px;;font-size:16px;vertical-align: text-bottom;padding-right: 4px;cursor: pointer;"></i>
                                            <i *ngIf="canShowDeleteBranch(b)" class="remove-todo ion-trash-a cell-button" (click)="deleteBranch(b)" style="font-size: 22px;cursor: pointer;vertical-align: sub;"></i>

                                        </td>

                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </ba-card>
                    </div>
                </div>
            </div>
            <div class="row" style="margin-bottom: 15px;height: 150px;"  *ngIf="_season != null">
            </div>
        </ba-card>
    </ba-card>
    <ba-card *ngIf="!_product" title="" baCardClass="with-scroll">
        <div>Select a product from the list to show its details.</div>
    </ba-card>
</div>
